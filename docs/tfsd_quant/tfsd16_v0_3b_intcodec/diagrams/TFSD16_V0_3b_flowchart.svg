<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 13.1.2 (20250808.2320)
 -->
<!-- Title: TFSD16_V0_3b_Flow Pages: 1 -->
<svg width="830pt" height="1651pt"
 viewBox="0.00 0.00 830.00 1651.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1647.44)">
<title>TFSD16_V0_3b_Flow</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1647.44 826.38,-1647.44 826.38,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="411.19" y="-1614.74" font-family="Times New Roman,serif" font-size="26.00">TFSD16 (TimeFeedback SigmaDelta) V03_B — Encoder Flow </text>
<text xml:space="preserve" text-anchor="middle" x="411.19" y="-1585.49" font-family="Times New Roman,serif" font-size="26.00"> (Closed&#45;loop: Δ_t = FP_e(t) − FP_d(t−1))</text>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="none" stroke="black" cx="647.25" cy="-1552.47" rx="24.47" ry="24.47"/>
<text xml:space="preserve" text-anchor="middle" x="647.25" y="-1548.77" font-family="Helvetica,sans-Serif" font-size="11.00">Start</text>
</g>
<!-- init -->
<g id="node2" class="node">
<title>init</title>
<polygon fill="none" stroke="black" points="743,-1491 551.5,-1491 551.5,-1415.5 743,-1415.5 743,-1491"/>
<text xml:space="preserve" text-anchor="middle" x="647.25" y="-1476.55" font-family="Helvetica,sans-Serif" font-size="11.00">Init t=0</text>
<text xml:space="preserve" text-anchor="middle" x="647.25" y="-1463.05" font-family="Helvetica,sans-Serif" font-size="11.00"> KF0: type=00 + 16b FP16</text>
<text xml:space="preserve" text-anchor="middle" x="647.25" y="-1449.55" font-family="Helvetica,sans-Serif" font-size="11.00"> prev = FP16_enc(0)</text>
<text xml:space="preserve" text-anchor="middle" x="647.25" y="-1436.05" font-family="Helvetica,sans-Serif" font-size="11.00"> prev_pos=0, l6_age=0, l6_accum=0</text>
<text xml:space="preserve" text-anchor="middle" x="647.25" y="-1422.55" font-family="Helvetica,sans-Serif" font-size="11.00"> t=1</text>
</g>
<!-- start&#45;&gt;init -->
<g id="edge1" class="edge">
<title>start&#45;&gt;init</title>
<path fill="none" stroke="black" d="M647.25,-1527.93C647.25,-1520.28 647.25,-1511.47 647.25,-1502.68"/>
<polygon fill="black" stroke="black" points="650.75,-1502.73 647.25,-1492.73 643.75,-1502.73 650.75,-1502.73"/>
</g>
<!-- loop -->
<g id="node3" class="node">
<title>loop</title>
<polygon fill="none" stroke="black" points="647.25,-1378.5 604.05,-1360.5 647.25,-1342.5 690.45,-1360.5 647.25,-1378.5"/>
<text xml:space="preserve" text-anchor="middle" x="647.25" y="-1356.8" font-family="Helvetica,sans-Serif" font-size="11.00">t &lt; N ?</text>
</g>
<!-- init&#45;&gt;loop -->
<g id="edge2" class="edge">
<title>init&#45;&gt;loop</title>
<path fill="none" stroke="black" d="M647.25,-1415.08C647.25,-1406.76 647.25,-1398.05 647.25,-1390.14"/>
<polygon fill="black" stroke="black" points="650.75,-1390.4 647.25,-1380.4 643.75,-1390.4 650.75,-1390.4"/>
</g>
<!-- zrchk -->
<g id="node4" class="node">
<title>zrchk</title>
<polygon fill="none" stroke="black" points="423.25,-1296 296.25,-1261 423.25,-1226 550.25,-1261 423.25,-1296"/>
<text xml:space="preserve" text-anchor="middle" x="423.25" y="-1264.05" font-family="Helvetica,sans-Serif" font-size="11.00">ZeroRun?</text>
<text xml:space="preserve" text-anchor="middle" x="423.25" y="-1250.55" font-family="Helvetica,sans-Serif" font-size="11.00"> (FP16_enc(t) == prev)</text>
</g>
<!-- loop&#45;&gt;zrchk -->
<g id="edge3" class="edge">
<title>loop&#45;&gt;zrchk</title>
<path fill="none" stroke="black" d="M626.98,-1350.68C594.54,-1336.56 529.75,-1308.36 481.91,-1287.53"/>
<polygon fill="black" stroke="black" points="483.32,-1284.33 472.76,-1283.55 480.53,-1290.75 483.32,-1284.33"/>
<text xml:space="preserve" text-anchor="middle" x="569.03" y="-1315.95" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- end -->
<g id="node22" class="node">
<title>end</title>
<ellipse fill="none" stroke="black" cx="796.25" cy="-1261" rx="22.13" ry="22.13"/>
<ellipse fill="none" stroke="black" cx="796.25" cy="-1261" rx="26.13" ry="26.13"/>
<text xml:space="preserve" text-anchor="middle" x="796.25" y="-1257.3" font-family="Helvetica,sans-Serif" font-size="11.00">End</text>
</g>
<!-- loop&#45;&gt;end -->
<g id="edge4" class="edge">
<title>loop&#45;&gt;end</title>
<path fill="none" stroke="black" d="M678.56,-1355.29C701.92,-1350.85 733.57,-1341.96 756.25,-1324.5 766.23,-1316.82 774.42,-1305.89 780.73,-1295.31"/>
<polygon fill="black" stroke="black" points="783.71,-1297.17 785.48,-1286.72 777.58,-1293.79 783.71,-1297.17"/>
<text xml:space="preserve" text-anchor="middle" x="771.75" y="-1315.95" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- zremit -->
<g id="node5" class="node">
<title>zremit</title>
<polygon fill="none" stroke="black" points="228.25,-1168.75 44.25,-1168.75 44.25,-1120.25 228.25,-1120.25 228.25,-1168.75"/>
<text xml:space="preserve" text-anchor="middle" x="136.25" y="-1154.3" font-family="Helvetica,sans-Serif" font-size="11.00">Emit ZR (type=11)</text>
<text xml:space="preserve" text-anchor="middle" x="136.25" y="-1140.8" font-family="Helvetica,sans-Serif" font-size="11.00"> Pad to nibble → 0xF → runlen(4b)</text>
<text xml:space="preserve" text-anchor="middle" x="136.25" y="-1127.3" font-family="Helvetica,sans-Serif" font-size="11.00"> (t += runlen)</text>
</g>
<!-- zrchk&#45;&gt;zremit -->
<g id="edge5" class="edge">
<title>zrchk&#45;&gt;zremit</title>
<path fill="none" stroke="black" d="M372.27,-1239.66C326.1,-1221.24 257.66,-1193.94 206.35,-1173.47"/>
<polygon fill="black" stroke="black" points="207.67,-1170.23 197.08,-1169.77 205.08,-1176.73 207.67,-1170.23"/>
<text xml:space="preserve" text-anchor="middle" x="295.48" y="-1199.45" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- kfper -->
<g id="node6" class="node">
<title>kfper</title>
<polygon fill="none" stroke="black" points="423.25,-1179.5 246,-1144.5 423.25,-1109.5 600.5,-1144.5 423.25,-1179.5"/>
<text xml:space="preserve" text-anchor="middle" x="423.25" y="-1147.55" font-family="Helvetica,sans-Serif" font-size="11.00">Periodic KF?</text>
<text xml:space="preserve" text-anchor="middle" x="423.25" y="-1134.05" font-family="Helvetica,sans-Serif" font-size="11.00">(kf_period &amp;&amp; t % kf_period == 0)</text>
</g>
<!-- zrchk&#45;&gt;kfper -->
<g id="edge7" class="edge">
<title>zrchk&#45;&gt;kfper</title>
<path fill="none" stroke="black" d="M423.25,-1225.65C423.25,-1214.78 423.25,-1202.59 423.25,-1191.06"/>
<polygon fill="black" stroke="black" points="426.75,-1191.34 423.25,-1181.34 419.75,-1191.34 426.75,-1191.34"/>
<text xml:space="preserve" text-anchor="middle" x="428.5" y="-1199.45" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- zremit&#45;&gt;loop -->
<g id="edge6" class="edge">
<title>zremit&#45;&gt;loop</title>
<path fill="none" stroke="black" d="M152.44,-1169.01C177.21,-1203.01 227.97,-1265.2 287.25,-1296 386.28,-1347.45 519.12,-1358.18 592.6,-1359.85"/>
<polygon fill="black" stroke="black" points="592.29,-1363.35 602.35,-1360.02 592.41,-1356.35 592.29,-1363.35"/>
</g>
<!-- kfper_emit -->
<g id="node7" class="node">
<title>kfper_emit</title>
<polygon fill="none" stroke="black" points="197.5,-1059 3,-1059 3,-997 197.5,-997 197.5,-1059"/>
<text xml:space="preserve" text-anchor="middle" x="100.25" y="-1044.55" font-family="Helvetica,sans-Serif" font-size="11.00">Emit KF (type=00 + 16b)</text>
<text xml:space="preserve" text-anchor="middle" x="100.25" y="-1031.05" font-family="Helvetica,sans-Serif" font-size="11.00"> prev=FP16_enc(t) </text>
<text xml:space="preserve" text-anchor="middle" x="100.25" y="-1017.55" font-family="Helvetica,sans-Serif" font-size="11.00"> prev_pos=0, l6_age=0, l6_accum=0 </text>
<text xml:space="preserve" text-anchor="middle" x="100.25" y="-1004.05" font-family="Helvetica,sans-Serif" font-size="11.00"> t++</text>
</g>
<!-- kfper&#45;&gt;kfper_emit -->
<g id="edge8" class="edge">
<title>kfper&#45;&gt;kfper_emit</title>
<path fill="none" stroke="black" d="M360.97,-1121.42C314.49,-1104.95 250.12,-1082.13 196.96,-1063.28"/>
<polygon fill="black" stroke="black" points="198.17,-1060 187.57,-1059.95 195.83,-1066.59 198.17,-1060"/>
<text xml:space="preserve" text-anchor="middle" x="278.56" y="-1082.95" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- sechk -->
<g id="node8" class="node">
<title>sechk</title>
<polygon fill="none" stroke="black" points="423.25,-1063 298.5,-1028 423.25,-993 548,-1028 423.25,-1063"/>
<text xml:space="preserve" text-anchor="middle" x="423.25" y="-1031.05" font-family="Helvetica,sans-Serif" font-size="11.00">SE changed? </text>
<text xml:space="preserve" text-anchor="middle" x="423.25" y="-1017.55" font-family="Helvetica,sans-Serif" font-size="11.00"> (S,E of enc(t) vs prev)</text>
</g>
<!-- kfper&#45;&gt;sechk -->
<g id="edge10" class="edge">
<title>kfper&#45;&gt;sechk</title>
<path fill="none" stroke="black" d="M423.25,-1109.15C423.25,-1098.28 423.25,-1086.09 423.25,-1074.56"/>
<polygon fill="black" stroke="black" points="426.75,-1074.84 423.25,-1064.84 419.75,-1074.84 426.75,-1074.84"/>
<text xml:space="preserve" text-anchor="middle" x="428.5" y="-1082.95" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- kfper_emit&#45;&gt;loop -->
<g id="edge9" class="edge">
<title>kfper_emit&#45;&gt;loop</title>
<path fill="none" stroke="black" d="M67.71,-1059.13C54.99,-1073.07 41.89,-1090.7 35.25,-1109.5 24.89,-1138.83 21.1,-1151.79 35.25,-1179.5 75.42,-1258.16 115.58,-1260.02 196.25,-1296 267.88,-1327.95 499.36,-1348.52 599.9,-1356.15"/>
<polygon fill="black" stroke="black" points="599.47,-1359.63 609.7,-1356.89 599.99,-1352.65 599.47,-1359.63"/>
</g>
<!-- seekf -->
<g id="node9" class="node">
<title>seekf</title>
<polygon fill="none" stroke="black" points="638,-946.5 446.5,-946.5 446.5,-884.5 638,-884.5 638,-946.5"/>
<text xml:space="preserve" text-anchor="middle" x="542.25" y="-932.05" font-family="Helvetica,sans-Serif" font-size="11.00">Emit KF (type=00 + 16b) </text>
<text xml:space="preserve" text-anchor="middle" x="542.25" y="-918.55" font-family="Helvetica,sans-Serif" font-size="11.00"> prev=FP16_enc(t)</text>
<text xml:space="preserve" text-anchor="middle" x="542.25" y="-905.05" font-family="Helvetica,sans-Serif" font-size="11.00"> prev_pos=0, l6_age=0, l6_accum=0</text>
<text xml:space="preserve" text-anchor="middle" x="542.25" y="-891.55" font-family="Helvetica,sans-Serif" font-size="11.00"> t++</text>
</g>
<!-- sechk&#45;&gt;seekf -->
<g id="edge11" class="edge">
<title>sechk&#45;&gt;seekf</title>
<path fill="none" stroke="black" d="M451.75,-1000.53C466.63,-986.72 485.08,-969.58 501.44,-954.39"/>
<polygon fill="black" stroke="black" points="503.72,-957.05 508.67,-947.68 498.96,-951.92 503.72,-957.05"/>
<text xml:space="preserve" text-anchor="middle" x="497" y="-966.45" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- prep -->
<g id="node10" class="node">
<title>prep</title>
<polygon fill="none" stroke="black" points="428.25,-946.5 172.25,-946.5 172.25,-884.5 428.25,-884.5 428.25,-946.5"/>
<text xml:space="preserve" text-anchor="middle" x="300.25" y="-932.05" font-family="Helvetica,sans-Serif" font-size="11.00">Prep patch stage:</text>
<text xml:space="preserve" text-anchor="middle" x="300.25" y="-918.55" font-family="Helvetica,sans-Serif" font-size="11.00"> Md = mantissa(prev), M = mantissa(FP16_enc(t))</text>
<text xml:space="preserve" text-anchor="middle" x="300.25" y="-905.05" font-family="Helvetica,sans-Serif" font-size="11.00"> cur_M=Md, cur_pos=prev_pos </text>
<text xml:space="preserve" text-anchor="middle" x="300.25" y="-891.55" font-family="Helvetica,sans-Serif" font-size="11.00"> patches=[], touched_l6=false, w=0</text>
</g>
<!-- sechk&#45;&gt;prep -->
<g id="edge13" class="edge">
<title>sechk&#45;&gt;prep</title>
<path fill="none" stroke="black" d="M394.1,-1000.81C378.59,-986.88 359.25,-969.51 342.16,-954.15"/>
<polygon fill="black" stroke="black" points="344.88,-951.89 335.11,-947.81 340.21,-957.1 344.88,-951.89"/>
<text xml:space="preserve" text-anchor="middle" x="367" y="-966.45" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- seekf&#45;&gt;loop -->
<g id="edge12" class="edge">
<title>seekf&#45;&gt;loop</title>
<path fill="none" stroke="black" d="M583.49,-946.8C605.56,-966.75 628.25,-995.03 628.25,-1027 628.25,-1262 628.25,-1262 628.25,-1262 628.25,-1286.42 634.06,-1313.66 639.26,-1333.12"/>
<polygon fill="black" stroke="black" points="635.87,-1334.01 641.95,-1342.69 642.61,-1332.11 635.87,-1334.01"/>
</g>
<!-- wloop -->
<g id="node11" class="node">
<title>wloop</title>
<polygon fill="none" stroke="black" points="300.25,-847.5 149.28,-829.5 300.25,-811.5 451.22,-829.5 300.25,-847.5"/>
<text xml:space="preserve" text-anchor="middle" x="300.25" y="-825.8" font-family="Helvetica,sans-Serif" font-size="11.00">While (w &lt; W) and (cur_M != M)</text>
</g>
<!-- prep&#45;&gt;wloop -->
<g id="edge14" class="edge">
<title>prep&#45;&gt;wloop</title>
<path fill="none" stroke="black" d="M300.25,-884.17C300.25,-876.06 300.25,-867.32 300.25,-859.29"/>
<polygon fill="black" stroke="black" points="303.75,-859.34 300.25,-849.34 296.75,-859.34 303.75,-859.34"/>
</g>
<!-- win -->
<g id="node12" class="node">
<title>win</title>
<polygon fill="none" stroke="black" points="268.62,-765 65.88,-765 65.88,-716.5 268.62,-716.5 268.62,-765"/>
<text xml:space="preserve" text-anchor="middle" x="167.25" y="-750.55" font-family="Helvetica,sans-Serif" font-size="11.00">Choose window by hb of (M⊕cur_M) </text>
<text xml:space="preserve" text-anchor="middle" x="167.25" y="-737.05" font-family="Helvetica,sans-Serif" font-size="11.00"> pos = clamp(9−hb, 0..7), msb=9−pos </text>
<text xml:space="preserve" text-anchor="middle" x="167.25" y="-723.55" font-family="Helvetica,sans-Serif" font-size="11.00"> Δ=pos−cur_pos → shift2/pos3</text>
</g>
<!-- wloop&#45;&gt;win -->
<g id="edge15" class="edge">
<title>wloop&#45;&gt;win</title>
<path fill="none" stroke="black" d="M277.69,-813.78C260,-802.25 234.8,-785.81 212.94,-771.55"/>
<polygon fill="black" stroke="black" points="215.05,-768.75 204.76,-766.22 211.22,-774.61 215.05,-768.75"/>
<text xml:space="preserve" text-anchor="middle" x="252.79" y="-784.95" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- wend -->
<g id="node15" class="node">
<title>wend</title>
<polygon fill="none" stroke="black" points="366.5,-454.5 280,-454.5 280,-418.5 366.5,-418.5 366.5,-454.5"/>
<text xml:space="preserve" text-anchor="middle" x="323.25" y="-432.8" font-family="Helvetica,sans-Serif" font-size="11.00">Exit patch loop</text>
</g>
<!-- wloop&#45;&gt;wend -->
<g id="edge20" class="edge">
<title>wloop&#45;&gt;wend</title>
<path fill="none" stroke="black" d="M314.55,-812.87C328.06,-796.43 346.25,-769.2 346.25,-741.75 346.25,-741.75 346.25,-741.75 346.25,-535 346.25,-511.12 339.64,-484.82 333.5,-465.55"/>
<polygon fill="black" stroke="black" points="336.88,-464.63 330.38,-456.26 330.25,-466.85 336.88,-464.63"/>
<text xml:space="preserve" text-anchor="middle" x="351.5" y="-635.7" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- payload -->
<g id="node13" class="node">
<title>payload</title>
<polygon fill="none" stroke="black" points="272.25,-670 40.25,-670 40.25,-608 272.25,-608 272.25,-670"/>
<text xml:space="preserve" text-anchor="middle" x="156.25" y="-655.55" font-family="Helvetica,sans-Serif" font-size="11.00">Build payload (M5+1): </text>
<text xml:space="preserve" text-anchor="middle" x="156.25" y="-642.05" font-family="Helvetica,sans-Serif" font-size="11.00"> M5=[msb..msb−4] from target, B1=[msb−5] </text>
<text xml:space="preserve" text-anchor="middle" x="156.25" y="-628.55" font-family="Helvetica,sans-Serif" font-size="11.00"> Apply to cur_M; if msb≤5 → touched_l6=true</text>
<text xml:space="preserve" text-anchor="middle" x="156.25" y="-615.05" font-family="Helvetica,sans-Serif" font-size="11.00"> w++</text>
</g>
<!-- win&#45;&gt;payload -->
<g id="edge16" class="edge">
<title>win&#45;&gt;payload</title>
<path fill="none" stroke="black" d="M164.64,-716.11C163.51,-705.83 162.15,-693.46 160.85,-681.72"/>
<polygon fill="black" stroke="black" points="164.33,-681.34 159.76,-671.79 157.37,-682.11 164.33,-681.34"/>
</g>
<!-- eguard -->
<g id="node14" class="node">
<title>eguard</title>
<polygon fill="none" stroke="black" points="159.25,-571 0,-536 159.25,-501 318.5,-536 159.25,-571"/>
<text xml:space="preserve" text-anchor="middle" x="159.25" y="-539.05" font-family="Helvetica,sans-Serif" font-size="11.00">ε&#45;guard OK?</text>
<text xml:space="preserve" text-anchor="middle" x="159.25" y="-525.55" font-family="Helvetica,sans-Serif" font-size="11.00"> |FP16(cur)−FP16(target)| ≤ ε</text>
</g>
<!-- payload&#45;&gt;eguard -->
<g id="edge17" class="edge">
<title>payload&#45;&gt;eguard</title>
<path fill="none" stroke="black" d="M157.15,-607.7C157.39,-599.79 157.64,-591.09 157.9,-582.57"/>
<polygon fill="black" stroke="black" points="161.39,-582.79 158.19,-572.69 154.39,-582.58 161.39,-582.79"/>
</g>
<!-- eguard&#45;&gt;wloop -->
<g id="edge19" class="edge">
<title>eguard&#45;&gt;wloop</title>
<path fill="none" stroke="black" d="M219.59,-558.03C242.71,-569.22 266.95,-585.44 281.25,-608 319.21,-667.9 312.31,-756.05 305.5,-800.58"/>
<polygon fill="black" stroke="black" points="302.09,-799.74 303.92,-810.17 309,-800.88 302.09,-799.74"/>
<text xml:space="preserve" text-anchor="middle" x="314.33" y="-689.95" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- eguard&#45;&gt;wend -->
<g id="edge18" class="edge">
<title>eguard&#45;&gt;wend</title>
<path fill="none" stroke="black" d="M201.48,-509.89C226.93,-494.77 259.1,-475.64 283.99,-460.84"/>
<polygon fill="black" stroke="black" points="285.72,-463.88 292.53,-455.77 282.14,-457.87 285.72,-463.88"/>
<text xml:space="preserve" text-anchor="middle" x="267.89" y="-474.45" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- l6acc -->
<g id="node16" class="node">
<title>l6acc</title>
<polygon fill="none" stroke="black" points="458.75,-381.5 187.75,-381.5 187.75,-345.5 458.75,-345.5 458.75,-381.5"/>
<text xml:space="preserve" text-anchor="middle" x="323.25" y="-366.55" font-family="Helvetica,sans-Serif" font-size="11.00">If !touched_l6: l6_accum += |(M&amp;0x3F)−(Md&amp;0x3F)|</text>
<text xml:space="preserve" text-anchor="middle" x="323.25" y="-353.05" font-family="Helvetica,sans-Serif" font-size="11.00"> else l6_accum=0; l6_age = (touched_l6?0:l6_age+1)</text>
</g>
<!-- wend&#45;&gt;l6acc -->
<g id="edge21" class="edge">
<title>wend&#45;&gt;l6acc</title>
<path fill="none" stroke="black" d="M323.25,-418.31C323.25,-410.73 323.25,-401.6 323.25,-393.04"/>
<polygon fill="black" stroke="black" points="326.75,-393.04 323.25,-383.04 319.75,-393.04 326.75,-393.04"/>
</g>
<!-- watchdog -->
<g id="node17" class="node">
<title>watchdog</title>
<polygon fill="none" stroke="black" points="323.25,-308.5 101.75,-273.5 323.25,-238.5 544.75,-273.5 323.25,-308.5"/>
<text xml:space="preserve" text-anchor="middle" x="323.25" y="-276.55" font-family="Helvetica,sans-Serif" font-size="11.00">Watchdog KF? </text>
<text xml:space="preserve" text-anchor="middle" x="323.25" y="-263.05" font-family="Helvetica,sans-Serif" font-size="11.00"> (l6_age ≥ L6_WATCH) or (l6_accum ≥ 64)</text>
</g>
<!-- l6acc&#45;&gt;watchdog -->
<g id="edge22" class="edge">
<title>l6acc&#45;&gt;watchdog</title>
<path fill="none" stroke="black" d="M323.25,-345.11C323.25,-337.94 323.25,-329.25 323.25,-320.46"/>
<polygon fill="black" stroke="black" points="326.75,-320.48 323.25,-310.48 319.75,-320.48 326.75,-320.48"/>
</g>
<!-- wdk_emit -->
<g id="node18" class="node">
<title>wdk_emit</title>
<polygon fill="none" stroke="black" points="676.5,-188 482,-188 482,-126 676.5,-126 676.5,-188"/>
<text xml:space="preserve" text-anchor="middle" x="579.25" y="-173.55" font-family="Helvetica,sans-Serif" font-size="11.00">Emit KF (type=00 + 16b) </text>
<text xml:space="preserve" text-anchor="middle" x="579.25" y="-160.05" font-family="Helvetica,sans-Serif" font-size="11.00"> prev=FP16_enc(t) </text>
<text xml:space="preserve" text-anchor="middle" x="579.25" y="-146.55" font-family="Helvetica,sans-Serif" font-size="11.00"> prev_pos=0, l6_age=0, l6_accum=0 </text>
<text xml:space="preserve" text-anchor="middle" x="579.25" y="-133.05" font-family="Helvetica,sans-Serif" font-size="11.00"> t++</text>
</g>
<!-- watchdog&#45;&gt;wdk_emit -->
<g id="edge23" class="edge">
<title>watchdog&#45;&gt;wdk_emit</title>
<path fill="none" stroke="black" d="M380.06,-247.09C415.63,-231.18 461.94,-210.47 500.96,-193.02"/>
<polygon fill="black" stroke="black" points="502.15,-196.32 509.85,-189.04 499.29,-189.93 502.15,-196.32"/>
<text xml:space="preserve" text-anchor="middle" x="466.05" y="-211.95" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- rdsw -->
<g id="node19" class="node">
<title>rdsw</title>
<polygon fill="none" stroke="black" stroke-dasharray="5,2" points="256.25,-192 48.25,-157 256.25,-122 464.25,-157 256.25,-192"/>
<text xml:space="preserve" text-anchor="middle" x="256.25" y="-160.05" font-family="Helvetica,sans-Serif" font-size="11.00">(Optional) RD switch </text>
<text xml:space="preserve" text-anchor="middle" x="256.25" y="-146.55" font-family="Helvetica,sans-Serif" font-size="11.00"> patch_bits &lt; KF_bits AND cur_M==M ?</text>
</g>
<!-- watchdog&#45;&gt;rdsw -->
<g id="edge25" class="edge">
<title>watchdog&#45;&gt;rdsw</title>
<path fill="none" stroke="black" d="M304.94,-241.21C297.33,-228.21 288.4,-212.94 280.28,-199.06"/>
<polygon fill="black" stroke="black" points="283.37,-197.42 275.3,-190.56 277.33,-200.95 283.37,-197.42"/>
<text xml:space="preserve" text-anchor="middle" x="297.01" y="-211.95" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- wdk_emit&#45;&gt;loop -->
<g id="edge24" class="edge">
<title>wdk_emit&#45;&gt;loop</title>
<path fill="none" stroke="black" d="M619.69,-188.43C642.41,-209.24 666.25,-239.05 666.25,-272.5 666.25,-1262 666.25,-1262 666.25,-1262 666.25,-1286.42 660.44,-1313.66 655.24,-1333.12"/>
<polygon fill="black" stroke="black" points="651.89,-1332.11 652.55,-1342.69 658.63,-1334.01 651.89,-1332.11"/>
</g>
<!-- emit_patch -->
<g id="node20" class="node">
<title>emit_patch</title>
<polygon fill="none" stroke="black" points="583.75,-75.5 354.75,-75.5 354.75,0 583.75,0 583.75,-75.5"/>
<text xml:space="preserve" text-anchor="middle" x="469.25" y="-61.05" font-family="Helvetica,sans-Serif" font-size="11.00">Emit Patch (type=01) </text>
<text xml:space="preserve" text-anchor="middle" x="469.25" y="-47.55" font-family="Helvetica,sans-Serif" font-size="11.00"> pc=|patches|−1; for each patch: </text>
<text xml:space="preserve" text-anchor="middle" x="469.25" y="-34.05" font-family="Helvetica,sans-Serif" font-size="11.00"> shift2(+pos3), payload(6b=M5+1) </text>
<text xml:space="preserve" text-anchor="middle" x="469.25" y="-20.55" font-family="Helvetica,sans-Serif" font-size="11.00"> prev = join(S,E, cur_M); prev_pos=cur_pos </text>
<text xml:space="preserve" text-anchor="middle" x="469.25" y="-7.05" font-family="Helvetica,sans-Serif" font-size="11.00"> t++</text>
</g>
<!-- rdsw&#45;&gt;emit_patch -->
<g id="edge26" class="edge">
<title>rdsw&#45;&gt;emit_patch</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M304.05,-129.69C329.95,-115.43 362.58,-97.47 391.99,-81.28"/>
<polygon fill="black" stroke="black" points="393.42,-84.49 400.49,-76.6 390.05,-78.35 393.42,-84.49"/>
<text xml:space="preserve" text-anchor="middle" x="376.26" y="-95.45" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- emit_kf -->
<g id="node21" class="node">
<title>emit_kf</title>
<polygon fill="none" stroke="black" points="775.38,-68.75 637.12,-68.75 637.12,-6.75 775.38,-6.75 775.38,-68.75"/>
<text xml:space="preserve" text-anchor="middle" x="706.25" y="-54.3" font-family="Helvetica,sans-Serif" font-size="11.00">Emit KF (type=00 + 16b) </text>
<text xml:space="preserve" text-anchor="middle" x="706.25" y="-40.8" font-family="Helvetica,sans-Serif" font-size="11.00"> prev=FP16_enc(t) </text>
<text xml:space="preserve" text-anchor="middle" x="706.25" y="-27.3" font-family="Helvetica,sans-Serif" font-size="11.00"> prev_pos=0 </text>
<text xml:space="preserve" text-anchor="middle" x="706.25" y="-13.8" font-family="Helvetica,sans-Serif" font-size="11.00"> t++</text>
</g>
<!-- rdsw&#45;&gt;emit_kf -->
<g id="edge27" class="edge">
<title>rdsw&#45;&gt;emit_kf</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M345.51,-136.57C413.5,-121.31 509.23,-98.79 592.25,-75.5 603.25,-72.41 614.78,-68.96 626.1,-65.44"/>
<polygon fill="black" stroke="black" points="626.94,-68.84 635.43,-62.5 624.84,-62.17 626.94,-68.84"/>
<text xml:space="preserve" text-anchor="middle" x="524.37" y="-95.45" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- emit_patch&#45;&gt;loop -->
<g id="edge28" class="edge">
<title>emit_patch&#45;&gt;loop</title>
<path fill="none" stroke="black" d="M584.15,-66.53C619.42,-79.16 656.49,-97.05 685.25,-122 698.33,-133.34 704.25,-138.69 704.25,-156 704.25,-1262 704.25,-1262 704.25,-1262 704.25,-1291.86 684.08,-1320.69 667.74,-1339.16"/>
<polygon fill="black" stroke="black" points="665.18,-1336.77 660.93,-1346.47 670.31,-1341.54 665.18,-1336.77"/>
</g>
<!-- emit_kf&#45;&gt;loop -->
<g id="edge29" class="edge">
<title>emit_kf&#45;&gt;loop</title>
<path fill="none" stroke="black" d="M720.89,-68.83C730.86,-92.07 742.25,-125.34 742.25,-156 742.25,-1262 742.25,-1262 742.25,-1262 742.25,-1291.76 738.31,-1302.52 718.25,-1324.5 708.62,-1335.05 695.12,-1342.8 682.46,-1348.29"/>
<polygon fill="black" stroke="black" points="681.55,-1344.88 673.55,-1351.82 684.13,-1351.39 681.55,-1344.88"/>
</g>
</g>
</svg>
